/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * monaco-css version: 0.0.1(68050f0b0a97a7386302b0ca0bafa8553cf58c8e)
 * Released under the MIT license
 * https://github.com/Microsoft/monaco-css/blob/master/LICENSE.md
 *-----------------------------------------------------------------------------*/
define("vs/language/choicescript/workerManagerChoiceScript",["require","exports","./fillers/monaco-editor-core"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerManager=void 0;var r=function(){function e(e){var t=this;this._defaults=e,this._worker=null,this._lastUsedTime=0,this._configChangeListener=this._defaults.onDidChange((function(){return t._stopWorker()}))}return e.prototype._stopWorker=function(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null},e.prototype.dispose=function(){this._configChangeListener.dispose(),this._stopWorker()},e.prototype._checkIfIdle=function(){this._worker&&(Date.now()-this._lastUsedTime>12e4&&this._stopWorker())},e.prototype._getClient=function(){return this._lastUsedTime=Date.now(),this._client||(this._worker=n.editor.createWebWorker({moduleId:"vs/language/choicescript/choicescriptWorker",label:this._defaults.languageId,createData:{languageSettings:this._defaults.diagnosticsOptions,languageId:this._defaults.languageId}}),this._client=this._worker.getProxy()),this._client},e.prototype.getLanguageServiceWorker=function(){for(var e,t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return this._getClient().then((function(t){e=t})).then((function(e){return t._worker.withSyncedResources(n)})).then((function(t){return e}))},e}();t.WorkerManager=r})),define("vs/language/choicescript/languageFeaturesChoiceScript",["require","exports","vscode-choicescript-languageservice","./fillers/monaco-editor-core"],(function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IndexAdapter=t.DocumentSymbolAdapter=t.ReferenceAdapter=t.DefinitionAdapter=t.SignatureHelpAdapter=t.CodeActionAdapter=t.HoverAdapter=t.CompletionAdapter=t.DiagnosticsAdapter=void 0;var i=function(){function e(e,t,n){var i=this;this._languageId=e,this._worker=t,this._disposables=[],this._listener=Object.create(null);var o=function(e){var t,n=e.getModeId();n===i._languageId&&(i._listener[e.uri.toString()]=e.onDidChangeContent((function(){window.clearTimeout(t),t=window.setTimeout((function(){return i._doValidate(e.uri,n)}),500)})),i._doValidate(e.uri,n))},a=function(e){r.editor.setModelMarkers(e,i._languageId,[]);var t=e.uri.toString(),n=i._listener[t];n&&(n.dispose(),delete i._listener[t])};this._disposables.push(r.editor.onDidCreateModel(o)),this._disposables.push(r.editor.onWillDisposeModel(a)),this._disposables.push(r.editor.onDidChangeModelLanguage((function(e){a(e.model),o(e.model)}))),this._disposables.push(n.onDidChange((function(e){r.editor.getModels().forEach((function(e){e.getModeId()===i._languageId&&(a(e),o(e))}))}))),this._disposables.push(n.onDictionaryChange((function(e){r.editor.getModels().forEach((function(e){e.getModeId()===i._languageId&&i._doValidate(e.uri,e.getModeId())}))}))),this._disposables.push({dispose:function(){for(var e in r.editor.getModels().forEach(a),i._listener)i._listener[e].dispose()}}),r.editor.getModels().forEach(o)}return e.prototype.dispose=function(){this._disposables.forEach((function(e){return e&&e.dispose()})),this._disposables=[]},e.prototype._doValidate=function(e,t){this._worker(e).then((function(t){return t.doValidation3(e.toString())})).then((function(n){var i=n.map((function(e){return n="number"==typeof(t=e).code?String(t.code):t.code,{severity:o(t.severity),startLineNumber:t.range.start.line+1,startColumn:t.range.start.character+1,endLineNumber:t.range.end.line+1,endColumn:t.range.end.character+1,message:t.message,code:n,source:t.source};var t,n})),a=r.editor.getModel(e);a.getModeId()===t&&r.editor.setModelMarkers(a,t,i)})).then(void 0,(function(e){console.error(e)}))},e}();function o(e){switch(e){case n.DiagnosticSeverity.Error:return r.MarkerSeverity.Error;case n.DiagnosticSeverity.Warning:return r.MarkerSeverity.Warning;case n.DiagnosticSeverity.Information:return r.MarkerSeverity.Info;case n.DiagnosticSeverity.Hint:return r.MarkerSeverity.Hint;default:return r.MarkerSeverity.Info}}function a(e){if(e)return{character:e.column-1,line:e.lineNumber-1}}function s(e){if(e)return new r.Range(e.start.line+1,e.start.character+1,e.end.line+1,e.end.character+1)}function u(e){var t=r.languages.CompletionItemKind;switch(e){case n.CompletionItemKind.Text:return t.Text;case n.CompletionItemKind.Method:return t.Method;case n.CompletionItemKind.Function:return t.Function;case n.CompletionItemKind.Constructor:return t.Constructor;case n.CompletionItemKind.Field:return t.Field;case n.CompletionItemKind.Variable:return t.Variable;case n.CompletionItemKind.Class:return t.Class;case n.CompletionItemKind.Interface:return t.Interface;case n.CompletionItemKind.Module:return t.Module;case n.CompletionItemKind.Property:return t.Property;case n.CompletionItemKind.Unit:return t.Unit;case n.CompletionItemKind.Value:return t.Value;case n.CompletionItemKind.Enum:return t.Enum;case n.CompletionItemKind.Keyword:return t.Keyword;case n.CompletionItemKind.Snippet:return t.Snippet;case n.CompletionItemKind.Color:return t.Color;case n.CompletionItemKind.File:return t.File;case n.CompletionItemKind.Reference:return t.Reference}return t.Property}function d(e){if(e)return{range:s(e.range),text:e.newText}}t.DiagnosticsAdapter=i;var c=function(){function e(e){this._worker=e}return Object.defineProperty(e.prototype,"triggerCharacters",{get:function(){return[" ",":"]},enumerable:!1,configurable:!0}),e.prototype.provideCompletionItems=function(e,t,i,o){var c=e.uri;return this._worker(c).then((function(e){return e.doComplete3(c.toString(),a(t))})).then((function(i){if(i){var o=e.getWordUntilPosition(t),a=new r.Range(t.lineNumber,o.startColumn,t.lineNumber,o.endColumn),c=i.items.map((function(e){var t,i={label:e.label,insertText:e.insertText||e.label,sortText:e.sortText,filterText:e.filterText,documentation:e.documentation?l(e.documentation):void 0,detail:e.detail,range:a,kind:u(e.kind)};return e.textEdit&&(void 0!==(t=e.textEdit).insert&&void 0!==t.replace?i.range={insert:s(e.textEdit.insert),replace:s(e.textEdit.replace)}:i.range=s(e.textEdit.range),i.insertText=e.textEdit.newText),e.additionalTextEdits&&(i.additionalTextEdits=e.additionalTextEdits.map(d)),e.insertTextFormat===n.InsertTextFormat.Snippet&&(i.insertTextRules=r.languages.CompletionItemInsertTextRule.InsertAsSnippet),i}));return{isIncomplete:i.isIncomplete,suggestions:c}}}))},e}();function l(e){return"string"==typeof e?{value:e}:(t=e)&&"object"==typeof t&&"string"==typeof t.kind?"plaintext"===e.kind?{value:e.value.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}:{value:e.value}:{value:"```"+e.language+"\n"+e.value+"\n```\n"};var t}function p(e){if(e)return Array.isArray(e)?e.map(l):[l(e)]}t.CompletionAdapter=c;var g=function(){function e(e){this._worker=e}return e.prototype.provideHover=function(e,t,n){var r=e.uri;return this._worker(r).then((function(e){return e.doHover(r.toString(),a(t))})).then((function(e){if(e)return{range:s(e.range),contents:p(e.contents)}}))},e}();t.HoverAdapter=g;var f=function(){function e(e){this._worker=e}return e.prototype.provideCodeActions=function(e,t,n,i){var o=e.uri,a=[];return this._worker(o).then((function(t){var i=n.markers;if(i.length<=0)return null;for(var o=0,s=i=(i=i.filter((function(e){return"badSpelling"===e.code}))).slice(0,1);o<s.length;o++){var u=s[o],d=new r.Range(u.startLineNumber,u.startColumn,u.endLineNumber,u.endColumn),c=e.getWordAtPosition(new r.Position(d.startLineNumber,d.startColumn));c&&a.push({word:c.word,range:d})}return a.length<=0?null:t.suggestSpelling(a.map((function(e){return e.word})))})).then((function(t){if(!t)return null;var n=[];if(t.length>0)for(var r=0;r<t[0].length;r++)n.push({title:"Correct spelling: "+t[0][r],kind:"quickfix",edit:{edits:[{edit:{range:a[0].range,text:t[0][r]},resource:e.uri}]}});return n.push({title:"Ignore '"+a[0].word+"' this session",kind:"quickfix",command:{id:"add-words",title:"Ignore Word",arguments:[{uri:o,dict:"session",words:[a[0].word]}]}}),n.push({title:"Add '"+a[0].word+"' to the User Dictionary",kind:"quickfix",command:{id:"add-words",title:"Add Word",arguments:[{uri:o,dict:"persistent",words:[a[0].word]}]}}),n.length>0?{actions:n,dispose:function(){}}:null}))},e}();t.CodeActionAdapter=f;var h=function(){function e(e){this._worker=e,this.signatureHelpTriggerCharacters=[" "]}return e.prototype.provideSignatureHelp=function(e,t,n,r){var i=e.uri;return this._worker(i).then((function(n){var r,o=e.getLineContent(t.lineNumber);if(r=o.match(/^(\s*\*gosub_scene\s+(\w+)\s+(\w+))/))!0;else{if(!(r=o.match(/^(\s*\*gosub\s+(\w+))/)))return null;!1}o.slice(r[1].length).trim().split(" ").filter((function(e){return e})).length;return n.getRoutineInfo(i.toString(),e.getOffsetAt(t)).then((function(e){return e?{value:{signatures:[{label:r[2]+".txt -> "+r[3]+": "+e.parameters.map((function(e){return e.label})).join(" "),parameters:e.parameters}],activeSignature:e.activeSignature,activeParameter:e.activeParameter},dispose:function(){}}:null}))}))},e}();function m(e){return{uri:r.Uri.parse(e.uri),range:s(e.range)}}t.SignatureHelpAdapter=h;var v=function(){function e(e){this._worker=e}return e.prototype.provideDefinition=function(e,t,n){var r=e.uri;return this._worker(r).then((function(e){return e.findDefinition(r.toString(),a(t))})).then((function(e){if(e)return[m(e)]}))},e}();t.DefinitionAdapter=v;var _=function(){function e(e){this._worker=e}return e.prototype.provideReferences=function(e,t,n,r){var i=e.uri;return this._worker(i).then((function(e){return e.findReferences(i.toString(),a(t))})).then((function(e){if(e)return e.map(m)}))},e}();function y(e){var t=r.languages.SymbolKind;switch(e){case n.SymbolKind.File:return t.Array;case n.SymbolKind.Module:return t.Module;case n.SymbolKind.Namespace:return t.Namespace;case n.SymbolKind.Package:return t.Package;case n.SymbolKind.Class:return t.Class;case n.SymbolKind.Method:return t.Method;case n.SymbolKind.Property:return t.Property;case n.SymbolKind.Field:return t.Field;case n.SymbolKind.Constructor:return t.Constructor;case n.SymbolKind.Enum:return t.Enum;case n.SymbolKind.Interface:return t.Interface;case n.SymbolKind.Function:return t.Function;case n.SymbolKind.Variable:return t.Variable;case n.SymbolKind.Constant:return t.Constant;case n.SymbolKind.String:return t.String;case n.SymbolKind.Number:return t.Number;case n.SymbolKind.Boolean:return t.Boolean;case n.SymbolKind.Array:return t.Array}return t.Function}t.ReferenceAdapter=_;var w=function(){function e(e){this._worker=e}return e.prototype.provideDocumentSymbols=function(e,t){var n=e.uri;return this._worker(n).then((function(e){return e.findDocumentSymbols(n.toString())})).then((function(e){if(e)return e.map((function(e){return{name:e.name,detail:"",containerName:e.containerName,kind:y(e.kind),tags:[],range:s(e.location.range),selectionRange:s(e.location.range)}}))}))},e}();t.DocumentSymbolAdapter=w;var b=function(){function e(e,t){var n=this;this._languageId=e,this._worker=t,this._disposables=[],this._listener=Object.create(null);var i=function(e){var t;e.getModeId()===n._languageId&&(n._listener[e.uri.toString()]=e.onDidChangeContent((function(){window.clearTimeout(t),t=window.setTimeout((function(){return n._updateIndex(e.uri)}),1e3)})),n._updateIndex(e.uri))};this._disposables.push(r.editor.onDidCreateModel(i)),this._disposables.push(r.editor.onWillDisposeModel((function(e){n._removeIndex(e.uri);var t=e.uri.toString(),r=n._listener[t];r&&(r.dispose(),delete n._listener[t])}))),this._disposables.push({dispose:function(){for(var e in n._listener)n._listener[e].dispose()}}),r.editor.getModels().forEach(i)}return e.prototype._updateIndex=function(e){this._worker(e).then((function(t){return t.updateIndex(e.toString())}))},e.prototype._removeIndex=function(e){this._worker(e).then((function(t){return t.removeIndex(e.toString())}))},e.prototype.dispose=function(){this._disposables.forEach((function(e){return e&&e.dispose()})),this._disposables=[]},e}();t.IndexAdapter=b})),define("vs/language/choicescript/choicescriptMode",["require","exports","./workerManagerChoiceScript","./languageFeaturesChoiceScript","./fillers/monaco-editor-core"],(function(e,t,n,r,i){"use strict";function o(e){return{dispose:function(){return a(e)}}}function a(e){for(;e.length;)e.pop().dispose()}Object.defineProperty(t,"__esModule",{value:!0}),t.setupMode=void 0,t.setupMode=function(e){var t=[],s=[],u=new n.WorkerManager(e);t.push(u);var d=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return u.getLanguageServiceWorker.apply(u,e)};return d(new i.Uri).then((function(t){var n=e.diagnosticsOptions.spellcheck.userDictionary,r=[];for(var i in n)r.push(i);t.addWords(r)})),function(){var n=e.languageId,o=e.modeConfiguration;if(a(s),o.completionItems&&s.push(i.languages.registerCompletionItemProvider(n,new r.CompletionAdapter(d))),o.hovers&&s.push(i.languages.registerHoverProvider(n,new r.HoverAdapter(d))),o.definitions&&s.push(i.languages.registerDefinitionProvider(n,new r.DefinitionAdapter(d))),o.references&&s.push(i.languages.registerReferenceProvider(n,new r.ReferenceAdapter(d))),o.documentSymbols&&s.push(i.languages.registerDocumentSymbolProvider(n,new r.DocumentSymbolAdapter(d))),s.push(i.languages.registerSignatureHelpProvider(n,new r.SignatureHelpAdapter(d))),o.diagnostics&&s.push(i.languages.registerCodeActionProvider(n,new r.CodeActionAdapter(d))),o.foldingRanges,t.push(i.editor.registerCommand("add-words",(function(t,n){Array.isArray(n)&&(n=n[0]),d(n.uri).then((function(t){t.addWords(n.words).then((function(t){e.addDictWords(n.dict,t.filter((function(e){return e})))}))}))}))),t.push(i.editor.registerCommand("remove-words",(function(t,n){d(n.uri).then((function(t){t.removeWords(n.words).then((function(t){e.removeDictWords(n.dict,t.filter((function(e){return e})))}))}))}))),o.diagnostics&&s.push(new r.DiagnosticsAdapter(n,d,e)),o.autoFormat){var u={".":{match:"...",result:"…"},"-":{match:"--",result:"—"}};s.push(i.languages.registerOnTypeFormattingEditProvider(n,{autoFormatTriggerCharacters:Object.keys(u),provideOnTypeFormattingEdits:function(e,t,n,r,o){var a=u[n].match.length,s=new i.Range(t.lineNumber,t.column>=a?t.column-a:0,t.lineNumber,t.column);if(e.getValueInRange(s)===u[n].match)return[{range:s,text:u[n].result}]}}))}s.push(new r.IndexAdapter(n,d))}(),t.push(o(s)),o(t)}}));